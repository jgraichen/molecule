@import 'colors'
@import 'tab-focus'

// All button-like elements should extend this to work
// with e.g. button groups
%m-button
  display: inline-block
  margin-bottom: 0

  font-size: inherit
  font-weight: inherit
  font-family: inherit
  line-height: inherit
  white-space: nowrap

  text-align: center
  vertical-align: middle
  touch-action: manipulation

  cursor: pointer
  background-image: none
  user-select: none

  border: 1px solid transparent
  border-radius: 2px

  padding: 2px 4px

  &, &:active, &.active
    &:focus, &.focus
      +tab-focus

  &, &:hover, &:focus, &.focus
    text-decoration: none

  &:active, &.active
    outline: 0
    background-image: none
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, .2)

  &[disabled], &.disabled, fieldset[disabled] &
    cursor: default
    pointer-events: none
    opacity: .65
    box-shadow: none

  &::-moz-focus-inner
    border: 0
    padding: 0

@mixin m-button
  @extend %m-button

@mixin m-button-variant($color, $text)
  color: $text

  @if lightness($text) < 40%
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3)
  @else
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)

  border-color: rgba(0, 0, 0, .2)

  background-color: $color
  background-image: linear-gradient(lighten($color, 2%), $color)

  &:hover
    color: $text
    text-decoration: none
    border-color: rgba(0, 0, 0, .3)
    background-color: lighten($color, 6%)
    background-image: linear-gradient(lighten($color, 6%), $color)

  &:active
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, .2)
    background-image: none
    background-color: $color

  &[disabled]
    &:hover, &:focus, &:active, &
      background-color: $color
      background-image: none
      border-color: rgba(0, 0, 0, .2)
      box-shadow: none
      opacity: .6
